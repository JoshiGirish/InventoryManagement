{% extends "base.html" %}
    <form enctype="multipart/form-data" action="" method="POST">
    {% csrf_token %}

    {% block title %}
        <div class="container col-sm-6 m-2">
            <div class="container d-flex align-items-center row">
                <!-- <h2 class="col-sm-6">Create Product</h2> -->
                <h2 class="col-sm-6" style="color: #777777;">Create Product</h2>
                    <div>
                        <button class="btn btn-light m-1"><i class="fas fa-plus"></i> New</button>
                        <button class="btn btn-light m-1"><i class="fas fa-edit"></i> Edit</button>
                        <button type= "submit" class="btn btn-light m-1"><i class="fas fa-save"></i> Save</button>
                        <button class="btn btn-light m-1" data-toggle="modal" data-target="#uploadModal"><i class="fas fa-file-import"></i> Import</button>
                        <!-- <a href="" class="btn btn-sm btn-danger" data-toggle="modal" data-target="#uploadModal"><i class="fas fa-file-import"></i> Import</a> -->
                    </div>
            </div> 
        </div>
               <!-- Modal -->
  <div class="modal fade" id="uploadModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Upload</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div id="dropzone">
          <div class="modal-body">
            <form class="dropzone needsclick dz-clickable"  id="my-awesome-dropzone" action="{% url 'upload' %}" method="POST">
              {% csrf_token %}
              <div class="dz-message needsclick row">
                <div class="col-sm-5">
                {% load static %}
                <img style="max-height: 100px;" src="{% static 'file-csv-solid.svg' %}" alt="">
                </div>
                <div class="col-sm-7">
                <button type="button" class="dz-button">Drop files here or click to upload.</button><br />
              </div>
              </div>
            </div>
          </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              <button type="submit" class="btn btn-success">Upload</button>
            </div>
          </form>
      </div>
    </div>
    {% load static %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.7.0/dropzone.js"></script>
    <script src="{% static 'dropzone.js' %}"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
     <script type="text/javascript">
        $("#file-1").fileinput({
            theme: 'fa',
            uploadUrl: '#',
            allowedFileExtensions: ['jpg', 'png', 'gif'],
            overwriteInitial: false,
            maxFileSize:2000,
            maxFilesNum: 10,
            slugCallback: function (filename) {
                return filename.replace('(', '_').replace(']', '_');
            }
        });

        $('#delModal').on('show.bs.modal', function(event){
            var button = $(event.relatedTarget);
            console.log(button)
            var product_id = button.data('prod_id');
            var product_name = button.data('prod_name');
            var modal = $(this);
            modal.find('.modal-body #pro_id').val(product_id);
            modal.find('#prod_name').text(product_name);
            // alert("you are here")
          //   document.getElementById('pro_id').value = 10;
        })
      </script>
      <style>
          .main-section{
            margin:0 auto;
            padding: 20px;
            margin-top: 100px;
            background-color: #fff;
            box-shadow: 0px 0px 20px #c1c1c1;
            }
            .fileinput-remove,
            .fileinput-upload{
                display: none;
            }
      </style>
  </div>
    {% endblock %}

    {% block contents %}     
        <div class="row">
            <div class="col-sm-6">
                {% include "crud/basic_info.html" %}
                {% include "crud/thumbnail.html" %}
            </div>
            <div class="col-sm-6">
                {% include "crud/status.html" %}
                {% include "crud/pricing_info.html" %}
                {% include "crud/detailed_info.html" %}
            </div>
        </div>
    {% endblock %}

        <!-- <input type="submit" name="Submit"> -->
    </form>

    <script>
        function add_class(){
            document.getElementById('id_thumbnail-image').classList.add('btn');
        }
        
        add_class();
    </script>
